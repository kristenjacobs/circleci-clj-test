general:
  artifacts:
    - "target/uberjar/circleci-clj-test-0.1.0-SNAPSHOT-standalone.jar"

machine:
  services:
    - docker

test:
  override:
    - lein test2junit
    - lein uberjar
    - docker build -t kristenjacobs/circle-clj-test .

deployment:
  production:
    branch: master
    commands:
      - docker run kristenjacobs/circleci-clj-test
  staging:
    branch: master
    commands:
      - docker run kristenjacobs/circleci-clj-test
